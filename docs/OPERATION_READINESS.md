# KonaMall 운영 가능성 분석 및 개선점

**종합 평가: ⭐⭐⭐ (3/5) — 중간 수준 (개선 필요)**

핵심 기능은 구현되어 있으나, **실제 상용 운영에는 추가 개선이 필요**합니다.

---

## ✅ 강점 (Strengths)

- **아키텍처**: FastAPI + Next.js, 모듈화(API/서비스/태스크/커넥터), Docker 기반 배포
- **핵심 기능**: 회원가입·로그인(JWT), 상품·장바구니·주문·결제 연동 인터페이스, 관리자 대시보드, Celery 태스크
- **확장성**: 공급처 커넥터 패턴(BaseConnector), Alembic 마이그레이션
- **보안 기본**: 비밀번호 해싱(bcrypt), JWT, CORS

---

## 🔴 치명적 (Critical) — 즉시 수정 필요

### 1. 실제 공급처 API 연동 부재 (Stub)

- **현황**: Temu/AliExpress 커넥터가 샘플·하드코딩 데이터 반환
- **영향**: 실제 상품 데이터 없음, 주문 처리 불가
- **대안**:  
  - Temu Merchant API / AliExpress Open Platform 등 공식 API 연동  
  - 또는 CSV/DB 수동 입력으로 테스트 상품 준비

### 2. 결제 게이트웨이 테스트 모드

- **현황**: `KAKAO_PAY_CID=TC0ONETIME`, Admin Key 등 미설정
- **조치**: 카카오페이·네이버페이 가맹점 신청 후 `.env` 에 실제 키 설정 (운영 전 필수)

### 3. SECRET_KEY 기본값

- **현황**: 기본값이 코드에 있음. **프로덕션에서는 반드시 환경 변수로 다른 값 설정**
- **조치**:  
  ```bash
  openssl rand -hex 32
  # .env.production 에 SECRET_KEY=발급값 설정
  ```
- **검증**: `DEBUG=false` 인데 기본 SECRET_KEY 사용 시 앱 시작 시 경고/실패하도록 구현 권장 (현재 config에서 검사 가능)

---

## 🟡 중요 (High Priority)

### 4. 테스트 코드

- **현황**: `backend/tests/test_health.py` 등 최소 테스트만 존재
- **권장**: 회원가입/로그인, 주문 생성, 결제 플로우 등 핵심 API 테스트 추가, 커버리지 60% 이상 목표

### 5. 에러 처리 및 로깅

- **권장**: 외부 API 호출 재시도(tenacity), 구조화 로깅, Sentry 등 모니터링 연동

### 6. DB 트랜잭션

- **권장**: 주문 생성 등 복수 테이블 갱신 구간은 트랜잭션으로 묶고, 실패 시 롤백 처리 (일부 적용됨)

---

## 🟢 개선 권장 (Medium)

- **캐싱**: 상품 목록 등 Redis 캐싱
- **이미지**: S3/CloudFront 등 CDN 및 리사이징
- **관리자 권한**: `/api/admin/*` 는 이미 `get_admin_user` 의존성으로 관리자만 접근 가능

---

## 📋 운영 체크리스트

### 배포 전 필수

- [ ] 실제 공급처 API 연동 또는 상품 데이터 준비
- [ ] 결제 게이트웨이 정식 계약 및 키 발급
- [ ] SECRET_KEY, DATABASE_URL 등 환경 변수 안전 관리 (기본값 미사용)
- [ ] HTTPS/SSL 설정 (Let's Encrypt 등)
- [ ] 에러 모니터링 (Sentry 등)
- [ ] 로깅 수집 및 백업 전략

### 법적/비즈니스

- [ ] 전자상거래법(통신판매업 신고), 이용약관, 개인정보처리방침
- [ ] 공급처·배송 물류 계약

---

## 🚀 단계별 로드맵

| 단계 | 기간 | 내용 |
|------|------|------|
| **Phase 1** | 1–2주 | SECRET_KEY 변경, 테스트 상품 수동 입력, 결제 테스트 환경 |
| **Phase 2** | 1개월 | 핵심 API 테스트, 에러 처리·로깅 강화 |
| **Phase 3** | 2–3개월 | 공급처 API 1곳 이상 연동, PG 정식 계약, 캐싱·CDN |
| **Phase 4** | 3–6개월 | 모니터링, 스케일링, 다국어 등 |

---

## 🎯 결론

- **현재**: 프로토타입/MVP 수준  
- **상용화**: Phase 3 완료 후 검토 권장  

**운영 시작 최소 조건**: 실제 상품 100개 이상, 결제 PG 정식 계약, SSL 적용, 핵심 기능 테스트 60% 이상, 에러 모니터링 구축.
